---
phase: 05-validation-wrapper-baseline
plan: 02
type: execute
wave: 2
depends_on:
  - "05-01"
files_modified:
  - scripts/verify-suite.sh
  - README.md
  - AGENTS.md
autonomous: true
requirements:
  - AUTO-02
  - AUTO-03
user_setup: []
must_haves:
  truths:
    - Wrapper outputs deterministic per-check `PASS`/`FAIL`/`SKIP` lines plus final count summary.
    - Wrapper exits non-zero when any required check fails.
    - Optional dependency checks (`asciinema`, `fzf`) fail soft with actionable `SKIP` guidance.
    - README and AGENTS document wrapper usage/semantics without introducing Phase 6 compatibility-matrix content.
  artifacts:
    - scripts/verify-suite.sh
    - README.md
    - AGENTS.md
  key_links:
    - scripts/verify-suite.sh:required failure handling -> non-zero exit contract
    - scripts/verify-suite.sh:optional dependency probes -> actionable SKIP guidance
    - README.md:verification documentation -> scripts/verify-suite.sh usage and semantics
    - AGENTS.md:maintainer guidance -> preserve wrapper contract and fail-soft behavior
---

<objective>
Harden wrapper status semantics and optional dependency behavior, then document the contract.

Purpose: lock deterministic output/exit behavior for operators and future maintainers.
Output: finalized wrapper semantics plus README/AGENTS contract updates for Phase 5.
</objective>

<execution_context>
@/Users/maleick/.codex/get-shit-done/workflows/execute-plan.md
@/Users/maleick/.codex/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/phases/05-validation-wrapper-baseline/05-CONTEXT.md
@.planning/phases/05-validation-wrapper-baseline/05-RESEARCH.md
@scripts/verify-suite.sh
@README.md
@AGENTS.md
@tmux/.tmux.conf
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enforce deterministic output and required failure exit semantics</name>
  <files>scripts/verify-suite.sh</files>
  <action>Refine wrapper output format so every check emits deterministic status lines, followed by a deterministic final summary line with counts. Enforce strict exit behavior: non-zero whenever any required check fails.</action>
  <verify>bash -n scripts/verify-suite.sh && ./scripts/verify-suite.sh >/tmp/verify-suite-pass.out 2>&1; test $? -eq 0 && rg -n "^PASS|^FAIL|^SKIP|^SUMMARY" /tmp/verify-suite-pass.out</verify>
  <done>Wrapper emits stable status/summary lines and exits 0 only on required-check success.</done>
</task>

<task type="auto">
  <name>Task 2: Add fail-soft optional checks and document wrapper contract</name>
  <files>scripts/verify-suite.sh,README.md,AGENTS.md</files>
  <action>Add explicit optional dependency probes for `asciinema` and `fzf` that emit actionable `SKIP` guidance when tools are missing. Update README and AGENTS with wrapper usage, output semantics, and maintenance contract; do not add compatibility matrix authoring guidance (Phase 6 scope).</action>
  <verify>./scripts/verify-suite.sh >/tmp/verify-suite-docs.out 2>&1; rg -n "SKIP|asciinema|fzf|verify-suite" /tmp/verify-suite-docs.out README.md AGENTS.md</verify>
  <done>Wrapper optional checks are fail-soft with guidance, and docs accurately describe wrapper behavior and scope boundaries.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `./scripts/verify-suite.sh` prints deterministic status lines and a final summary line
- [ ] `./scripts/verify-suite.sh` returns non-zero when a required check is intentionally forced to fail (for example via a test-only override env)
- [ ] `rg -n "asciinema|fzf|SKIP" scripts/verify-suite.sh README.md AGENTS.md` confirms fail-soft optional behavior and docs parity
- [ ] `rg -n "compatibility matrix|COMP-01|COMP-02" README.md AGENTS.md` confirms no Phase 6 matrix authoring content was introduced in this phase
</verification>

<success_criteria>

- AUTO-02 is satisfied with deterministic per-check status and strict failure exit semantics
- AUTO-03 is satisfied with actionable fail-soft optional dependency handling
- Wrapper docs contract is explicit and scoped to Phase 5 boundaries

</success_criteria>

<output>
After completion, create `.planning/phases/05-validation-wrapper-baseline/05-02-SUMMARY.md`
</output>
