---
phase: 07-verification-wrapper-modes-and-output-contracts
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - scripts/verify-suite.sh
autonomous: true
requirements:
  - AUTO-04
user_setup: []
must_haves:
  truths:
    - Wrapper supports `--quick` as a locked quick-mode contract.
    - Quick mode runs a fixed minimum required-check subset and preserves deterministic status output.
    - Default no-flag behavior remains equivalent to full baseline human-readable run.
    - Quick mode does not change required-failure exit semantics.
  artifacts:
    - scripts/verify-suite.sh
  key_links:
    - scripts/verify-suite.sh:arg parser -> `--quick` mode selection
    - scripts/verify-suite.sh:check catalog metadata -> quick inclusion/exclusion contract
    - scripts/verify-suite.sh:summary/exit path -> deterministic counts and required-failure handling
---

<objective>
Implement the Phase 7 quick-mode execution contract without regressing default wrapper behavior.

Purpose: satisfy `AUTO-04` with a deterministic, faster validation path that preserves reliability guarantees.
Output: updated `scripts/verify-suite.sh` supporting `--quick` with explicit mode semantics.
</objective>

<execution_context>
@/Users/maleick/.codex/get-shit-done/workflows/execute-plan.md
@/Users/maleick/.codex/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/phases/07-verification-wrapper-modes-and-output-contracts/07-CONTEXT.md
@.planning/phases/07-verification-wrapper-modes-and-output-contracts/07-RESEARCH.md
@scripts/verify-suite.sh
@.planning/phases/05-validation-wrapper-baseline/05-VERIFICATION.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add wrapper mode parser and quick-mode check selection</name>
  <files>scripts/verify-suite.sh</files>
  <action>Add non-interactive CLI argument parsing for `--quick` while preserving existing default invocation behavior. Introduce a deterministic check catalog/selection model so quick mode executes a locked minimum required-check subset.</action>
  <verify>bash -n scripts/verify-suite.sh && ./scripts/verify-suite.sh --quick >/tmp/verify-suite-quick.out 2>&1; status=$?; test "$status" -eq 0 && rg -n "^PASS|^FAIL|^SKIP|^SUMMARY" /tmp/verify-suite-quick.out</verify>
  <done>`--quick` executes successfully with deterministic status and summary output.</done>
</task>

<task type="auto">
  <name>Task 2: Lock quick-mode subset semantics and preserve default/full compatibility</name>
  <files>scripts/verify-suite.sh</files>
  <action>Define and enforce quick-mode subset behavior for required checks. Ensure excluded full-mode checks are surfaced deterministically (for example as explicit quick-mode `SKIP` lines) so scope differences are visible, while no-flag default remains full mode.</action>
  <verify>./scripts/verify-suite.sh >/tmp/verify-suite-full.out 2>&1 && ./scripts/verify-suite.sh --quick >/tmp/verify-suite-quick2.out 2>&1 && rg -n "req\.install_syntax|req\.zsh_syntax|req\.tmux_config|req\.vim_startup" /tmp/verify-suite-quick2.out && rg -n "SKIP.*quick" /tmp/verify-suite-quick2.out && rg -n "^SUMMARY" /tmp/verify-suite-full.out /tmp/verify-suite-quick2.out</verify>
  <done>Quick-mode subset is explicit and deterministic; default mode remains intact.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `./scripts/verify-suite.sh` (no flags) still runs and produces deterministic text summary
- [ ] `./scripts/verify-suite.sh --quick` runs and emits explicit quick-mode subset behavior
- [ ] Quick mode still enforces non-zero exit when required checks fail
- [ ] No matrix-generation scope (`COMP-03`) is introduced in this plan
</verification>

<success_criteria>

- `AUTO-04` is satisfied with a deterministic quick-mode path
- Default wrapper behavior remains backward compatible
- Quick-mode check selection is explicit, stable, and testable

</success_criteria>

<output>
After completion, create `.planning/phases/07-verification-wrapper-modes-and-output-contracts/07-01-SUMMARY.md`
</output>
