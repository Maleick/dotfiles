# Codebase Structure

**Analysis Date:** 2026-02-25

## Directory Layout

```text
/opt/dotfiles/
├── .planning/               # Planning artifacts generated by GSD workflows
│   └── codebase/            # Codebase mapping docs (including this file)
├── zsh/                     # Zsh runtime configuration source
│   ├── .zshrc               # Primary shell config linked to `~/.zshrc`
│   └── .zshrc.bak           # Historical backup config snapshot kept in repo working tree
├── tmux/                    # Tmux runtime configuration source
│   └── .tmux.conf           # Primary tmux config linked to `~/.tmux.conf`
├── vim/                     # Vim runtime configuration source
│   └── .vimrc               # Primary Vim config linked to `~/.vimrc`
├── AGENTS.md                # Repository operation guidance for coding agents
├── CHANGELOG.md             # Versioned release notes
├── README.md                # User-facing setup and usage documentation
├── VERSION                  # Current semantic version string
├── install.sh               # Bootstrap installer/symlink script
└── .gitignore               # Repository inclusion/exclusion policy
```

## Directory Purposes

**`.planning/`:**
- Purpose: Workspace for generated planning/mapping outputs referenced by GSD orchestrators.
- Contains: Markdown planning documents under `.planning/codebase/`.
- Key files: `.planning/codebase/ARCHITECTURE.md`, `.planning/codebase/STRUCTURE.md`.
- Subdirectories: `.planning/codebase/` (codebase mapping set).

**`zsh/`:**
- Purpose: Source of shell behavior deployed to user home by `install.sh`.
- Contains: Zsh configuration files (`.zshrc` and backup-style `.zshrc.bak` snapshot).
- Key files: `zsh/.zshrc` (active source), `zsh/.zshrc.bak` (legacy/reference snapshot).
- Subdirectories: Not detected.

**`tmux/`:**
- Purpose: Source of tmux runtime behavior and keybindings.
- Contains: Single tmux configuration file.
- Key files: `tmux/.tmux.conf`.
- Subdirectories: Not detected.

**`vim/`:**
- Purpose: Source of Vim runtime/editor behavior and plugin declarations.
- Contains: Single Vim configuration file.
- Key files: `vim/.vimrc`.
- Subdirectories: Not detected.

## Key File Locations

**Entry Points:**
- `install.sh`: Bootstrap entry point for backing up and linking dotfiles.
- `zsh/.zshrc`: Shell runtime entry point loaded via `~/.zshrc`.
- `tmux/.tmux.conf`: Tmux runtime entry point loaded via `~/.tmux.conf`.
- `vim/.vimrc`: Vim runtime entry point loaded via `~/.vimrc`.

**Configuration:**
- `zsh/.zshrc`: Shell environment/options/aliases/functions and optional loaders.
- `tmux/.tmux.conf`: Multiplexer behavior, bindings, and status UI settings.
- `vim/.vimrc`: Editor options, plugins, and language-specific mappings.
- `.gitignore`: Exclusions enforcing slim repository scope.
- `VERSION`: Current release version value.

**Core Logic:**
- `install.sh`: Symlink and backup orchestration logic (`link_file` flow).
- `zsh/.zshrc`: Operational shell helper logic (`quickscan`, `extract`, `netinfo`, `rev-shell`, `/help`).
- `tmux/.tmux.conf`: Operational command dispatch via bindings (`bind P`, `bind U`, `bind C-n`).
- `vim/.vimrc`: Plugin bootstrap and editing workflow logic (`plug#begin`, COC mappings, filetype autocmds).

**Testing:**
- Not detected in `/opt/dotfiles` (no `tests/`, `test/`, or test runner config files present).

**Documentation:**
- `README.md`: Installation, usage examples, and operational notes.
- `AGENTS.md`: Repository-specific agent operating rules and architecture notes.
- `CHANGELOG.md`: Historical release entries and change categories.

## Naming Conventions

**Files:**
- Leading-dot runtime config filenames inside component directories: `zsh/.zshrc`, `tmux/.tmux.conf`, `vim/.vimrc`.
- Uppercase root documentation/metadata names: `README.md`, `AGENTS.md`, `CHANGELOG.md`, `VERSION`.
- Shell script naming with lowercase + extension: `install.sh`.
- Backup/snapshot suffix pattern: `zsh/.zshrc.bak`.

**Directories:**
- Lowercase functional directory names by runtime target: `zsh/`, `tmux/`, `vim/`.
- Hidden planning directory for generated artifacts: `.planning/`.

**Special Patterns:**
- Generated mapping docs in uppercase names under `.planning/codebase/` (for example `.planning/codebase/ARCHITECTURE.md`).
- Home-directory symlink targets map 1:1 from repository source files (`zsh/.zshrc` -> `~/.zshrc`, `tmux/.tmux.conf` -> `~/.tmux.conf`, `vim/.vimrc` -> `~/.vimrc`).

## Where to Add New Code

**New Feature:**
- Primary code: Add shell helpers to `zsh/.zshrc`, tmux shortcuts to `tmux/.tmux.conf`, or editor behavior to `vim/.vimrc` based on feature type.
- Tests: Not detected; add manual verification instructions in `README.md` or `AGENTS.md` if test automation remains absent.
- Config if needed: Update `install.sh` only when new symlink-managed files are introduced.

**New Component/Module:**
- Implementation: Keep runtime-specific additions in existing directories (`zsh/`, `tmux/`, `vim/`); create a new top-level directory only for a new runtime target.
- Types: Not applicable in current shell/tmux/vim-only repository.
- Tests: Not detected.

**New Route/Command:**
- Definition: Shell commands/functions in `zsh/.zshrc`; tmux-triggered commands in `tmux/.tmux.conf`.
- Handler: Inline command body in the same config file where it is declared.
- Tests: Not detected.

**Utilities:**
- Shared helpers: Reusable shell helper functions in `zsh/.zshrc`.
- Type definitions: Not applicable.

## Special Directories

**`.planning/codebase/`:**
- Purpose: Generated architecture/structure/quality/concern mapping docs for orchestration.
- Source: Produced by mapping workflows (for example `gsd-codebase-mapper` role output).
- Generated: Yes.
- Committed: Yes (not excluded by `.gitignore`).

**`.git/`:**
- Purpose: Local Git metadata for repository history, refs, and object database.
- Source: Created/managed by Git.
- Generated: Yes.
- Committed: No (repository-internal metadata directory).

**`zsh/`:**
- Purpose: Canonical shell config source used to link into `$HOME`.
- Source: Maintainer-authored config files.
- Generated: No.
- Committed: Yes.

---

*Structure analysis: 2026-02-25*
